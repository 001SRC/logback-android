<?xml version="1.0" encoding="UTF-8" ?>
	  
<configuration>
  <!-- We create a joran rule that will instance and bind the appropriate
       data source instance to JNDI. -->   
  <newRule pattern="configuration/bindDataSourceToJNDI" 
           actionClass="org.apache.log4j.db.BindDataSourceToJNDIAction"/>
  	    
  <bindDataSourceToJNDI />
  
  <appender name="DB" class="ch.qos.logback.classic.db.DBAppender">
     <connectionSource class="ch.qos.logback.core.db.DataSourceConnectionSource">
       
       <dataSource class="${dataSourceClass}">
         <param name="${url-key:-url}" value="${url}"/>
         <serverName>${serverName}</serverName>
         <databaseName>${databaseName}</databaseName>   
       </dataSource>
       
       <user>${user}</user>
       <password>${password}</password>>
     </connectionSource>
  </appender>
  
	<!-- Prevent internal logback DEBUG messages from polluting the output. -->
	<logger name="ch.qos.logback.core.joran"><level value="INFO" /></logger>
	<logger name="ch.qos.logback.classic.joran"><level value="INFO" /></logger>

  <root>
    <level value ="debug"/>
    <appender-ref ref="DB" />
  </root>  
  
</configuration>


